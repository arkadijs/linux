# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/regulator/allwinner,sun20i-d1-analog-ldos.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Allwinner D1 Analog LDOs

description:
  Allwinner D1 contains a set of LDOs which are designed to supply analog power
  inside and outside the SoC. They are controlled by a register within the audio
  codec MMIO space, but which is not part of the audio codec clock/reset domain,
  and so is exposed as a syscon.

maintainers:
  - Samuel Holland <samuel@sholland.org>

properties:
  compatible:
    enum:
      - allwinner,sun20i-d1-analog-ldos

  nvmem-cells:
    items:
      - description: NVMEM cell for the calibrated bandgap reference trim value

  nvmem-cell-names:
    items:
      - const: bg_trim

  syscon:
    $ref: /schemas/types.yaml#/definitions/phandle
    description: phandle of the device containing the power register

patternProperties:
  "^(aldo|hpldo)$":
    type: object
    $ref: regulator.yaml#

required:
  - compatible
  - nvmem-cells
  - nvmem-cell-names
  - syscon

unevaluatedProperties: false

examples:
  - |
    sid: efuse {
        #address-cells = <1>;
        #size-cells = <1>;

        bg_trim: bg-trim@28 {
            reg = <0x28 0x4>;
            bits = <16, 8>;
        };
    };

    ldos-analog {
        compatible = "allwinner,sun20i-d1-analog-ldos";
        nvmem-cells = <&bg_trim>;
        nvmem-cell-names = "bg_trim";
        syscon = <&codec>;

        reg_aldo: aldo {
            regulator-min-microvolt = <1800000>;
            regulator-max-microvolt = <1800000>;
        };

        reg_hpldo: hpldo {
            regulator-min-microvolt = <1800000>;
            regulator-max-microvolt = <1800000>;
        };
    };

...
